/*!
 * Hu.js v1.0.0-bata.0
 * https://github.com/MoomFE/Hu
 * 
 * (c) 2018-present Wei Zhang
 * Released under the MIT License.
 */

((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Hu=e()})(this,function(){"use strict";const{prototype:t,assign:e,create:s,keys:n,freeze:o}=Object,i=[];var r=(t,e)=>!(e!==t&&(e==e||t==t));const{apply:l,defineProperty:a,deleteProperty:c,getOwnPropertyDescriptor:u,has:d,ownKeys:h,set:p}=Reflect;var f=o({}),m=t=>"function"==typeof t;const{hasOwnProperty:g}=t;var v=t=>"[object Object]"==={}.toString.call(t);const{isArray:y,prototype:w}=Array,b=new WeakMap,x=new WeakMap;function N(t){return v(t)||y(t)?E(t):t}function E(t,e){return b.has(t)?b.get(t).proxy:x.has(t)?t:((t,e={})=>{const n={target:t,subs:s(null),deepSubs:new Set,lastValue:s(null)},o=n.proxy=new Proxy(t,{get:$(e.get,n),set:M(e.set,n),ownKeys:k(n),deleteProperty:A(e.deleteProperty,n)});return b.set(t,n),x.set(o,n),o})(t,e)}const $=({before:t}=f,{subs:e,lastValue:s})=>(n,o,r)=>{if(t&&0===t(n,o,r))return n[o];if((u(n,o)||f).get)return n[o];const l=n[o];if(m(l)&&!g.call(n,o)&&d(n,o))return l;const a=i[i.length-1];return a&&(a.add(e,o),s[o]=l),N(l)},M=({before:t}=f,{subs:e,deepSubs:s,lastValue:n})=>(o,i,l,a)=>{if(t&&0===t(o,i,l,a))return!1;if((u(o,i)||f).set)return o[i]=l,!0;const c=d(n,i)?n[i]:o[i];return!!r(c,l)||(o[i]=l,_(e,s,n,p,i,l),!0)},k=({deepSubs:t})=>e=>{const s=i[i.length-1];return s&&t.add(s),h(e)},A=({before:t}=f,{subs:e,deepSubs:s,lastValue:n})=>(o,i)=>{if(t&&0===t(o,i))return!1;const r=c(o,i);return r&&_(e,s,n,c,i),r};function _(t,e,s,n,o,i){const r=t[o];r&&r.size&&n(s,o,i);for(let t of[...r||[],...e])t.update()}var S=t=>"symbol"==typeof t,T=t=>{const e=s(null);return s=>d(e,s)?e[s]:e[s]=t(s)},C=T(t=>36===(t+"").charCodeAt(0)),V=t=>S(t)||!C(t),P=t=>"string"==typeof t,W={set:{before:(t,e)=>V(e)?null:0},get:{before:(t,e)=>P(e)&&C(e)?0:null},deleteProperty:{before:(t,e)=>P(e)&&C(e)?0:null}},L=(t,e)=>{if(t){const s=h(t);for(let n of s)e(n,t[n])}},H=t=>null!==t,O=t=>null!==t&&"object"==typeof t,j=t=>t,U=/\B([A-Z])/g,z=T(t=>t.replace(U,"-$1").toLowerCase());function B(t,e){const s={};return((t,e,s)=>{s.isSymbol=S(t),s.attr=e&&e.attr||(s.isSymbol?null:z(t))})(t,e,s),e&&(m(e)?s.from=e:(((t,e)=>{const s=t.type;null!=s&&(m(s)?e.from=s:v(s)&&(m(s.from)&&(e.from=s.from),m(s.to)&&(e.to=s.to)))})(e,s),((t,e)=>{if(d(t,"default")){const s=t.default;!m(s)&&O(s)||(e.default=s)}})(e,s))),s.from===Boolean&&(s.from=H),s}var I=()=>{};const F="undefined"!=typeof window,D=F&&window.navigator.userAgent.toLowerCase(),K=D&&/iphone|ipad|ipod|ios/.test(D);let R=!1;try{const t={};a(t,"passive",{get:()=>R=!0}),window.addEventListener("test-passive",null,t)}catch(t){}const q={};function Z(t,s,n){const o=e({},n),i=q[s]={};return((t,e)=>{const s=e.props={},n=e.propsMap={},o=t.props;let i=!1;if(null!=o&&((i=y(o))||v(o))){if(i){if(!o.length)return;for(let t of o)s[t]=B(t,null)}else L(o,(t,e)=>{s[t]=B(t,e)});L(s,(t,e)=>{const{attr:s}=e;s&&(n[s]||(n[s]=[])).push({name:t,from:e.from||j})})}})(o,i),((t,e,s)=>{const{methods:n,data:o,computed:i,watch:r}=e;n&&((t,e)=>{const s=e.methods={};L(t,(t,e)=>{m(e)&&(s[t]=e)})})(n,s),o&&((t,e,s)=>{(m(e)||!t&&v(e))&&(s.data=e)})(t,o,s),i&&((t,e)=>{const s=e.computed={};L(t,(t,e)=>{if(e){const n=m(e),o=n?e:e.get||I,i=n?I:e.set||I;s[t]={get:o,set:i}}})})(i,s),r&&(s.watch=r)})(t,o,i),((t,e)=>{["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed"].forEach(s=>{const n=t[s];e[s]=m(n)?n:I})})(o,i),((t,e,s)=>{const{render:n}=e;s.render=m(n)?n:null,F&&!t&&(s.el=e.el||void 0)})(t,o,i),[o,i]}let G=0;var J=()=>""+G++,Q=(t,e,s,n)=>{a(t,e,{enumerable:!0,configurable:!0,get:s,set:n})};const X=[];let Y=!1;function tt(){Y=!1;const t=X.slice(0);X.length=0;for(let e of t)e()}const et=Promise.resolve(),st=()=>{et.then(tt),K&&setTimeout(I)};function nt(t,e){let s;if(X.push(()=>{t?t.call(e):s(e)}),Y||(Y=!0,st()),!t)return new Promise(t=>{s=t})}const ot=[],it=new Map;let rt=!1,lt=!1,at=0;function ct(){lt=!0,at=0,ot.sort((t,e)=>t.id-e.id);for(let t;at<ot.length;at++)t=ot[at],it.delete(t),t.isComputed&&!t.shouldUpdate||t.get();rt=lt=!1,at=ot.length=0,it.clear()}class ut{constructor(t,e,s,n,o){if(this.id=J(),this.deps=new Set,this.fn=t,this.get=ut.get.bind(this),e){let t;this.isComputed=e,this.observeOptions=n,this.name=o,Q(this,"shouldUpdate",()=>t,e=>{(t=e)&&this.ssu()})}else!1===e&&(this.isWatch=!0,this.isWatchDeep=s)}static get(t){return this.clean(),this.isInit=!0,this.isComputed&&(this.shouldUpdate=!1),i.push(this),t=this.fn(),this.isWatchDeep&&this.wd(t),i.pop(),t}add(t,e){let s=t[e]||(t[e]=new Set);s.add(this),this.deps.add(s)}update(){this.isComputed&&(this.shouldUpdate=!0,this.lazy)||(t=>{if(!it.has(t)){if(it.set(t,!0),lt){let e=ot.length-1;for(;e>at&&ot[e].id>t.id;)e--;ot.splice(e+1,0,t)}else ot.push(t);rt||(rt=!0,nt(ct))}})(this)}clean(){for(let t of this.deps)t.delete(this);this.deps.clear()}wd(t){const e=x.get(t);e&&e.deepSubs.add(this)}ec(t){let e,{subs:s}=this.observeOptions;if(s&&(e=s[this.name])&&e.size)for(let s of e)if(!1===t(s))break}ssu(){this.ec(t=>{t.isComputed&&t.lazy&&(t.shouldUpdate=!0)})}get lazy(){let t=!0;return this.ec(e=>{if(e.isWatch||!e.isComputed&&!e.isWatch||e.isComputed&&!e.lazy)return t=!1}),t}}const dt=new WeakMap,ht=t=>(...e)=>{const s=t(...e);return dt.set(s,!0),s},pt=t=>"function"==typeof t&&dt.has(t),ft=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,mt=(t,e,s=null,n=null)=>{let o=e;for(;o!==s;){const e=o.nextSibling;t.insertBefore(o,n),o=e}},gt=(t,e,s=null)=>{let n=e;for(;n!==s;){const e=n.nextSibling;t.removeChild(n),n=e}},vt={},yt={},wt=`{{lit-${(Math.random()+"").slice(2)}}}`,bt=`\x3c!--${wt}--\x3e`,xt=RegExp(`${wt}|${bt}`),Nt="$lit$";class Et{constructor(t,e){this.parts=[],this.element=e;let s=-1,n=0;const o=[],i=e=>{const r=e.content,l=document.createTreeWalker(r,133,null,!1);let a=0;for(;l.nextNode();){s++;const e=l.currentNode;if(1===e.nodeType){if(e.hasAttributes()){const o=e.attributes;let i=0;for(let t=0;t<o.length;t++)o[t].value.indexOf(wt)>=0&&i++;for(;i-- >0;){const o=t.strings[n],i=kt.exec(o)[2],r=i.toLowerCase()+Nt,l=e.getAttribute(r).split(xt);this.parts.push({type:"attribute",index:s,name:i,strings:l}),e.removeAttribute(r),n+=l.length-1}}"TEMPLATE"===e.tagName&&i(e)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(wt)>=0){const i=e.parentNode,r=t.split(xt),l=r.length-1;for(let t=0;t<l;t++)i.insertBefore(""===r[t]?Mt():document.createTextNode(r[t]),e),this.parts.push({type:"node",index:++s});""===r[l]?(i.insertBefore(Mt(),e),o.push(e)):e.data=r[l],n+=l}}else if(8===e.nodeType)if(e.data===wt){const t=e.parentNode;null!==e.previousSibling&&s!==a||(s++,t.insertBefore(Mt(),e)),a=s,this.parts.push({type:"node",index:s}),null===e.nextSibling?e.data="":(o.push(e),s--),n++}else{let t=-1;for(;-1!==(t=e.data.indexOf(wt,t+1));)this.parts.push({type:"node",index:-1})}}};i(e);for(const t of o)t.parentNode.removeChild(t)}}const $t=t=>-1!==t.index,Mt=()=>document.createComment(""),kt=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=\/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class At{constructor(t,e,s){this._parts=[],this.template=t,this.processor=e,this.options=s}update(t){let e=0;for(const s of this._parts)void 0!==s&&s.setValue(t[e]),e++;for(const t of this._parts)void 0!==t&&t.commit()}_clone(){const t=ft?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=this.template.parts;let s=0,n=0;const o=t=>{const i=document.createTreeWalker(t,133,null,!1);let r=i.nextNode();for(;s<e.length&&null!==r;){const t=e[s];if($t(t))if(n===t.index){if("node"===t.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(r.previousSibling),this._parts.push(t)}else this._parts.push(...this.processor.handleAttributeExpressions(r,t.name,t.strings,this.options));s++}else n++,"TEMPLATE"===r.nodeName&&o(r.content),r=i.nextNode();else this._parts.push(void 0),s++}};return o(t),ft&&(document.adoptNode(t),customElements.upgrade(t)),t}}class _t{constructor(t,e,s,n){this.strings=t,this.values=e,this.type=s,this.processor=n}getHTML(){const t=this.strings.length-1;let e="";for(let s=0;s<t;s++){const t=this.strings[s],n=kt.exec(t);e+=n?t.substr(0,n.index)+n[1]+n[2]+Nt+n[3]+wt:t+bt}return e+this.strings[t]}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}const St=t=>null===t||!("object"==typeof t||"function"==typeof t);class Tt{constructor(t){this.value=void 0,this._pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(Mt()),this.endNode=t.appendChild(Mt())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t._insert(this.startNode=Mt()),t._insert(this.endNode=Mt())}insertAfterPart(t){t._insert(this.startNode=Mt()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this._pendingValue=t}commit(){for(;pt(this._pendingValue);){const t=this._pendingValue;this._pendingValue=vt,t(this)}const t=this._pendingValue;t!==vt&&(St(t)?t!==this.value&&this._commitText(t):t instanceof _t?this._commitTemplateResult(t):t instanceof Node?this._commitNode(t):Array.isArray(t)||t[Symbol.iterator]?this._commitIterable(t):t===yt?(this.value=yt,this.clear()):this._commitText(t))}_insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}_commitNode(t){this.value!==t&&(this.clear(),this._insert(t),this.value=t)}_commitText(t){const e=this.startNode.nextSibling;t=null==t?"":t,e===this.endNode.previousSibling&&3===e.nodeType?e.data=t:this._commitNode(document.createTextNode("string"==typeof t?t:t+"")),this.value=t}_commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof At&&this.value.template===e)this.value.update(t.values);else{const s=new At(e,t.processor,this.options),n=s._clone();s.update(t.values),this._commitNode(n),this.value=s}}_commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let s,n=0;for(const o of t)void 0===(s=e[n])&&(s=new Tt(this.options),e.push(s),0===n?s.appendIntoPart(this):s.insertAfterPart(e[n-1])),s.setValue(o),s.commit(),n++;n<e.length&&(e.length=n,this.clear(s&&s.endNode))}clear(t=this.startNode){gt(this.startNode.parentNode,t.nextSibling,this.endNode)}}try{const t={get capture(){return!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}function Ct(t){let e=Vt.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},Vt.set(t.type,e));let s=e.stringsArray.get(t.strings);if(void 0!==s)return s;const n=t.strings.join(wt);return void 0===(s=e.keyString.get(n))&&(s=new Et(t,t.getTemplateElement()),e.keyString.set(n,s)),e.stringsArray.set(t.strings,s),s}const Vt=new Map,Pt=new WeakMap,Wt=(t,e,s)=>{let n=Pt.get(e);void 0===n&&(gt(e,e.firstChild),Pt.set(e,n=new Tt(Object.assign({templateFactory:Ct},s))),n.appendInto(e)),n.setValue(t),n.commit()};(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.0.0");var Lt=/\s+/;const Ht=new WeakMap;var Ot=/;(?![^(]*\))/g,jt=/:(.+)/,Ut=T(t=>{const e={};return t.split(Ot).forEach(t=>{if(t){const s=t.split(jt);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e});const zt=new WeakMap,{filter:Bt}=w;var It=(t,e,s,n)=>{t.addEventListener(e,s,n)};const Ft=/[^a-zA-Z·À-ÖØ-öø-ͽͿ-῿‌-‍‿-⁀⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�.$_\d]/;var Dt=()=>!1,Kt=(t,e)=>{const n=new Map,o=s(null),i=E(o),r=new Proxy(i,{get:Rt(n),set:qt(n),deleteProperty:Dt}),l=function(t,e,s,n){const o=!n,i=o&&b.get(t);return(r,l,a)=>{const c=(l.set||I).bind(this),u=l.get.bind(this),d=new ut(()=>n?t[r]=u():e[r]=u(this),o,a,i,r);t[r]=void 0,s.set(r,{watcher:d,set:c})}}.call(t,o,i,n,e);return[o,r,l,e?(t=>e=>{const s=t.get(e);s&&s.watcher.clean()})(n):void 0]};const Rt=t=>(e,s)=>{const n=t.get(s);if(n){const t=n.watcher;t.isInit&&!t.shouldUpdate||t.get()}return e[s]},qt=t=>(e,s,n)=>{const o=t.get(s);return!!o&&(o.set(n),!0)},Zt=new WeakMap;function Gt(t,e,s){if(v(e))return this.$watch(t,e.handler,e);const n=this||f;let o,i,l,a,c;if(P(t))o=function(t){if(!Ft.test(t)){var e=t.split(".");return function(){let t=this;for(const s of e){if(!t)return;t=t[s]}return t}}}(t).bind(n);else{if(!m(t))return;o=t.bind(n)}Zt.has(n)?[i,l,a,c]=Zt.get(n):Zt.set(n,[i,l,a,c]=Kt(null,!0)),s=s||{};const u=J(),d=e.bind(n),h=!!s.deep;let p,g=p=!!s.immediate;return a(u,{get(){const t=i[u],e=o();return g&&(p||!r(e,t)||h)&&d(e,t),e}},h),l[u],g=!0,p=!1,()=>{c(u)}}var Jt=(t,e)=>t.getAttribute(e),Qt=(t,e)=>{const s=document.createEvent("HTMLEvents");s.initEvent(e,!0,!0),t.dispatchEvent(s)};function Xt(t,e,s){Gt(()=>t[0][t[1]],m(s)?s:t=>e[s]=t,{immediate:!0})}function Yt(t,e){Xt(e,t,"value"),It(t,"change",s=>{const[n,o]=e,i=Bt.call(t.options,t=>t.selected).map(t=>t.value);n[o]=t.multiple?i:i[0]})}function te(t,e){Xt(e,t,"checked"),It(t,"change",e=>{const[s,n]=this.options;s[n]=t.checked})}function ee(t,e){Xt(e,t,e=>{t.checked=e==(Jt(t,"value")||null)}),It(t,"change",e=>{const[s,n]=this.options;s[n]=Jt(t,"value")||null})}function se(t,e){Xt(e,t,"value"),It(t,"compositionstart",e=>{t.composing=!0}),It(t,"compositionend",e=>{t.composing&&(t.composing=!1,Qt(t,"input"))}),It(t,"input",e=>{if(t.composing)return;const[s,n]=this.options;s[n]=t.value})}var ne=(t,e,s,n)=>{t.removeEventListener(e,s,n)};class oe{constructor(t,e,s){this.elem=t,this.type=e,this.opts=(t=>{const e={},s=[];for(let n of t)ie[n]?e[n]=!0:re[n]&&s.push(re[n]);s.keys=t;const{once:n,passive:o,capture:i}=e;return{once:n,options:o?{passive:o,capture:i}:i,modifiers:s}})(s)}setValue(t){if(pt(t))throw Error(`@${this.type} 指令不支持传入指令方法进行使用 !`);this.oldListener=this.listener,this.listener=m(t)?t:null}commit(){const{listener:t,oldListener:e}=this;if(t!==e){const{elem:s,type:n,opts:o}=this,{options:i,modifiers:r,once:l,add:a=!0}=o;if(e&&!l&&ne(s,n,this.value,i),t&&a){l&&(o.add=!1);const e=this.value=function e(o){for(let t of r)if(!1===t(s,o,r))return;l&&ne(s,n,e,i),t.apply(this,arguments)};It(s,n,e,i)}}}}const ie={once:!0,capture:!0,passive:R},re={stop(t,e){e.stopPropagation()},prevent(t,e){e.preventDefault()},self:(t,e)=>e.target===t,exact(t,e,{keys:s}){const n=["ctrl","alt","shift","meta"].filter(t=>s.indexOf(t)<0);for(const t of n)if(e[t+"Key"])return!1;return!0}};["left","middle","right"].forEach((t,e)=>{re[t]=((t,s)=>d(s,"button")&&s.button===e)}),["ctrl","alt","shift","meta"].forEach(t=>{re[t]=((e,s)=>!!s[t+"Key"])});class le{constructor(t,e){this.elem=t,this.attr=e}setValue(t){if(pt(t))return t(this);this.oldValue=this.value,this.value=t}commit(){const{value:t,oldValue:e}=this;r(t,e)||this.elem.setAttribute(this.attr,t)}}class ae extends le{commit(){const t=this.value=!!this.value;t!==this.oldValue&&(t?this.elem.setAttribute(this.attr,""):this.elem.removeAttribute(this.attr))}}class ce extends le{commit(){const{value:t,oldValue:e}=this;r(t,e)||(this.elem[this.attr]=t)}}var ue=new class{handleAttributeExpressions(t,e,s,n){const o=e[0];if("."===o){const[s]=e.slice(1).split(".");return[new ce(t,s)]}if("@"===o){const[s,...n]=e.slice(1).split(".");return[new oe(t,s,n)]}if("?"===o){const[s]=e.slice(1).split(".");return[new ae(t,s)]}if(":"===o){const[s]=e.slice(1).split(".");if(d(de,s))return[new de[s](t,s)]}return[new le(t,e)]}handleTextExpression(t){return new Tt(t)}};const de={class:class{constructor(t){this.elem=t}setValue(t){if(pt(t))return t(this,!0);!function t(e,s){switch(typeof s){case"string":s.split(Lt).forEach(t=>e[t]=!0);break;case"object":y(s)?s.forEach(s=>t(e,s)):L(s,(s,n)=>n?t(e,s):delete e[s])}}(this.value={},t)}commit(){const{value:t,elem:{classList:e}}=this;if(Ht.has(this)){const s=Ht.get(this);L(s,s=>{d(t,s)||e.remove(s)}),L(t,t=>{d(s,t)||e.add(t)})}else L(t,t=>e.add(t));Ht.set(this,t)}},style:class{constructor(t){this.elem=t}setValue(t){if(pt(t))return t(this,!0);!function t(e,s){switch(typeof s){case"string":return t(e,Ut(s));case"object":y(s)?s.forEach(s=>t(e,s)):L(s,(t,s)=>e[z(t)]=s)}}(this.value={},t)}commit(){const{value:t,elem:{style:e}}=this,s=zt.get(this);L(s,(s,n)=>{d(t,s)||e.removeProperty(s)}),L(t,(t,s)=>{e.setProperty(t,s)}),zt.set(this,t)}},model:class{constructor(t){const e=t.nodeName.toLowerCase(),s=t.type;let n;"select"===e?n=Yt:"input"===e&&"checkbox"===s?n=te:"input"===e&&"radio"===s?n=ee:"input"!==e&&"textarea"!==e||(n=se),this.elem=t,this.handler=n}setValue(t){if(!(y(t)&&t.length>1))throw Error(":model 指令的参数出错, :model 指令不支持此种传参 !");this.options=e(this.options||E([]),t)}commit(){if(this.init||!this.handler)return;const{elem:t,options:e}=this;this.init=!0,this.handler(t,e)}}},he=new WeakMap,pe=new WeakMap;var fe=ht((t,e,s)=>{const n=m(e)?e:t=>t[e];return e=>{if(!(e instanceof Tt))throw Error("Hu.html.repeat 指令方法只能在文本区域中使用 !");const o=he.get(e)||[],i=pe.get(e)||[],r=[],l=[],a=[];for(let e,o=0;o<t.length;o++)e=t[o],r[o]=n(e,o),l[o]=s(e,o);let c,u,d=0,h=o.length-1,p=0,f=l.length-1;for(;d<=h&&p<=f;)if(null===o[d])d++;else if(null===o[h])h--;else if(i[d]===r[p])a[p]=me(o[d],l[p]),d++,p++;else if(i[h]===r[f])a[f]=me(o[h],l[f]),h--,f--;else if(i[d]===r[f])a[f]=me(o[d],l[f]),ge(e,o[d],a[f+1]),d++,f--;else if(i[h]===r[p])a[p]=me(o[h],l[p]),h--,p++;else if(void 0===c&&(c=ve(r,p,f),u=ve(i,d,h)),c.has(i[d]))ye(o[d]),d++;else if(c.has(i[h])){const t=u.get(r[p]),s=void 0!==t?o[t]:null;if(null===s){const t=we(e,o[d]);me(t,l[p]),a[p]=t}else a[p]=me(s,l[p]),ge(e,s,o[d]),o[t]=null;p++}else ye(o[h]),h--;for(;p<=f;){const t=we(e,a[f+1]);me(t,l[p]),a[p++]=t}for(;d<=h;){const t=o[d++];null!==t&&ye(t)}he.set(e,a),pe.set(e,r)}});function me(t,e){return t.setValue(e),t.commit(),t}function ge(t,e,s){const n=t.startNode.parentNode,o=s?s.startNode:t.endNode,i=e.endNode.nextSibling;i!==o&&mt(n,e.startNode,i,o)}function ve(t,e,s){const n=new Map;for(let o=e;o<=s;o++)n.set(t[o],o);return n}function ye(t){gt(t.startNode.parentNode,t.startNode,t.endNode.nextSibling)}function we(t,e){const s=t.startNode.parentNode,n=void 0===e?t.endNode:e.startNode,o=s.insertBefore(Mt(),n);s.insertBefore(Mt(),n);const i=new Tt(t.options);return i.insertAfterNode(o),i}const be=new WeakMap;var xe=ht(t=>e=>{if(!(e instanceof Tt))throw Error("Hu.html.unsafe 指令方法只能在文本区域中使用 !");const s=be.get(e);if(s&&St(t)&&t===s.value&&e.value===s.fragment)return;const n=document.createElement("template");n.innerHTML=t;const o=document.importNode(n.content,!0);e.setValue(o),be.set(e,{value:t,fragment:o})});const Ne=[],Ee=new WeakMap;var $e=ht((t,e)=>{const s=x.has(t);return(n,o=!1)=>{if(n instanceof Tt)throw Error("Hu.html.bind 指令方法只能在元素属性绑定中使用 !");const i=t=>{n.setValue(t),n.commit()};if(!s)return i(t[e]);const r=Gt(()=>t[e],i,{immediate:!0,deep:o}),l=Ne[Ne.length-1];let a=Ee.get(l);a||(a=[],Ee.set(l,a)),a.push(r)}});function Me(t,...e){return new _t(t,e,"html",ue)}function ke(t,e,s){const n=Ee.get(e);if(n){for(const t of n)t();n.length=0}Ne.push(e),Wt(t,e,s),Ne.pop()}e(Me,{unsafe:xe,repeat:fe,bind:$e});var Ae=(t,e,s)=>{const n=q[t].render;if(n){const{get:t}=new ut(()=>{const t=e.$el;t&&(ke(n.call(s,Me),t),e.$refs=(e=>{const s={},n=t.querySelectorAll("[ref]");return n.length&&Array.from(n).forEach(t=>{const e=t.getAttribute("ref");s[e]=s[e]?[].concat(s[e],t):t}),Object.freeze(s)})())});e.$forceUpdate=t}else e.$forceUpdate=I};const _e=new WeakMap;class Se{constructor(t){const e=E(this,W);Ae(t,this,e),(t=>{const e=s(null);_e.set(t,e)})(e)}}e(Se.prototype,{$watch:Gt,$mount(t){const{$info:e}=this;if(!e.isMounted){if(!e.isCustomElement){const e=t&&(P(t)?document.querySelector(t):t);if(!e||e===document.body||e===document.documentElement)return this;x.get(this).target.$el=e}const s=q[e.name],n=x.get(e).target;s.beforeMount.call(this),this.$forceUpdate(),n.isMounted=!0,s.mounted.call(this)}return this},$nextTick(t){return nt(t,this)},$on(t,e){if(y(t))for(const s of t)this.$on(s,e);else{const s=_e.get(this);(s[t]||(s[t]=[])).push(e)}return this}});var Te=(t,e,s,n,o)=>{V(e)&&(d(t,e)&&delete t[e],n?Q(t,e,n,o):t[e]=s)},Ce=t=>{for(let e in t)return!1;return!0},Ve={set:{before:()=>0},deleteProperty:{before:()=>0}};let Pe;function We(t,e,n,o,i){const r=new Se(n),a=b.get(r).proxy;return t&&(r.$el=e.attachShadow({mode:"open"}),r.$customElement=e),((t,e,s,n)=>{s.$options=E(n,Ve),s.$info=E({name:e,isMounted:!1,isCustomElement:t},Ve)})(t,n,r,i),((t,e,n,o,i)=>{const r=n.props,l=s(null),a=o.$props=E(l);L(r,(s,n)=>{let o=null;t&&n.attr&&(o=e.getAttribute(n.attr)),l[s]=null!==o?(n.from||j)(o):m(n.default)?n.default.call(i):n.default}),L(r,(t,e)=>{!e.isSymbol&&C(t)||Q(o,t,()=>a[t],e=>a[t]=e)})})(t,e,o,r,a),((t,e,n)=>{const o=e.$methods=s(null);L(t.methods,(t,s)=>{const i=o[t]=s.bind(n);Te(e,t,i)})})(o,r,a),((t,e,n)=>{const o=t.data;let i;i=o?m(o)?o.call(n):o:s(null);const r=e.$data=E(i);o&&L(i,(t,s)=>{Te(e,t,0,()=>r[t],e=>r[t]=e)})})(o,r,a),o.beforeCreate.call(a),((t,e,s)=>{const n=t.computed;if(Ce(n))return e.$computed=Pe||(Pe=E({},Ve));const[o,i,r]=Kt(s);e.$computed=i,x.set(i,{}),L(n,(t,s)=>{r(t,s),Te(e,t,0,()=>i[t],e=>i[t]=e)})})(o,r,a),function(t,e,s){L(t.watch,function t(e,n){if(y(n))for(const s of n)t(e,s);else v(n)||m(n)?s.$watch(e,n):P(n)&&s.$watch(e,function(){return l(this[n],this,arguments)})})}(o,0,a),o.created.call(a),!t&&o.el&&a.$mount(o.el),a}const Le=new Proxy(Se,{construct(t,[e]){const s="anonymous-"+J(),[n,o]=Z(!1,s,e);return We(!1,void 0,s,o,n)}});Le.version="1.0.0-bata.0";var He=t=>(function(e,s,n){if(n===s)return;const{$props:o}=this.$hu,{target:i}=x.get(o),l=t[e];for(const{name:t,from:e}of l){const s=e(n);r(i[t],s)||(o[t]=s)}});function Oe(){this.$hu.$mount()}const je=window.Hu;return Le.noConflict=(()=>(window.Hu===Le&&(window.Hu=je),Le)),"undefined"!=typeof window&&(window.Hu=Le),e(Le,{define(t,s){const[o,i]=Z(!0,t,s);class r extends HTMLElement{constructor(){super(),this.$hu=We(!0,this,t,i,o)}}r.observedAttributes=n(i.propsMap),e(r.prototype,{connectedCallback:Oe,disconnectedCallback(){},adoptedCallback(){},attributeChangedCallback:He(i.propsMap)}),customElements.define(t,r)},render(t,e){return arguments.length>1?ke(t,e):(e=t,function(){return ke(Me.apply(null,arguments),e)})},html:Me,nextTick:nt,observable:N}),Le});
